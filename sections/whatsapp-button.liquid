
{% if section.settings.is_active %}
  <a href="https://wa.me/{{ section.settings.phone_number | remove: '+' }}?text={{ section.settings.message }}" 
     target="_blank" 
     rel="noopener noreferrer" 
     class="whatsapp-button" 
     aria-label="Contactar por WhatsApp">
     <svg id="Social_Icons" version="1.1" viewBox="0 0 128 128" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
      <g id="_x36__stroke">
        <g id="WhatsApp">
        <rect clip-rule="evenodd" fill="none" fill-rule="evenodd" height="{{ section.settings.button_size }}" width="{{ section.settings.button_size }}"/>
        <path clip-rule="evenodd" d="M46.114,32.509    c-1.241-2.972-2.182-3.085-4.062-3.161c-0.64-0.037-1.353-0.074-2.144-0.074c-2.446,0-5.003,0.715-6.546,2.295    c-1.88,1.919-6.545,6.396-6.545,15.576c0,9.181,6.695,18.06,7.598,19.303c0.941,1.24,13.053,20.354,31.86,28.144    c14.707,6.095,19.071,5.53,22.418,4.816c4.89-1.053,11.021-4.667,12.564-9.03c1.542-4.365,1.542-8.09,1.09-8.88    c-0.451-0.79-1.693-1.24-3.573-2.182c-1.88-0.941-11.021-5.456-12.751-6.058c-1.693-0.639-3.31-0.413-4.588,1.393    c-1.806,2.521-3.573,5.08-5.003,6.622c-1.128,1.204-2.972,1.355-4.514,0.715c-2.069-0.864-7.861-2.898-15.008-9.256    c-5.53-4.928-9.291-11.06-10.381-12.904c-1.091-1.881-0.113-2.973,0.752-3.988c0.941-1.167,1.843-1.994,2.783-3.086    c0.941-1.091,1.467-1.655,2.069-2.935c0.64-1.241,0.188-2.521-0.263-3.462C51.418,45.414,47.657,36.233,46.114,32.509z M63.981,0    C28.699,0,0,28.707,0,63.999c0,13.996,4.514,26.977,12.187,37.512L4.212,125.29l24.6-7.862C38.93,124.125,51.004,128,64.019,128    C99.301,128,128,99.291,128,64.001c0-35.292-28.699-63.999-63.981-63.999h-0.037V0z" fill={{ section.settings.button_color }} fill-rule="evenodd" id="WhatsApp_logo"/>
        </g>
      </g>
    </svg>
  </a>

  <style>
    .whatsapp-button {
      position: fixed;
      right: {{ section.settings.button_margin }}px;
      bottom: {{ section.settings.button_margin }}px;
      background-color: {{ section.settings.button_phone_color }};
      border-radius: 50%;
      width: {{ section.settings.button_size }}px;
      height: {{ section.settings.button_size }}px;
      display: flex;
      justify-content: center;
      align-items: center;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      transition: all 0.3s ease;
      z-index: 100;
    }

    .whatsapp-button:hover {
      transform: scale(1.1);
    }
    .whatsapp-button svg {
      width: {{ section.settings.button_size }}px;
      height: {{ section.settings.button_size }}px;
      display: block;
    }
  </style>
{% endif %}

{% schema %}
{
  "name": "Hablar por WhatsApp",
  "settings": [
    {
      "type": "checkbox",
      "id": "is_active",
      "label": "Habilitar WhatsApp",
      "default": false
    },
    {
      "type": "text",
      "id": "phone_number",
      "label": "Ingresá el número de WhatsApp (ej: +5491123456789)",
    },
    {
      "type": "text",
      "id": "message",
      "label": "Ingresá el mensaje predeterminado",
      "default": "Hola, me interesa saber sobre sus productos."
    },
    {
      "type": "color",
      "id": "button_color",
      "label": "Color del botón",
      "default": "#67C15E"
    },
    {
      "type": "color",
      "id": "button_phone_color",
      "label": "Color del teléfono",
      "default": "#fff"
    },
    {
      "type": "number",
      "id": "button_size",
      "label": "Ingresá el tamaño en pixeles (ej: 30, 40)",
      "default": 35
    },
    
    {
      "type": "number",
      "id": "button_margin",
      "label": "Ingresá el margen desde la esquina en pixeles (ej: 10, 20)",
      "default": 15
    },
  ],
  "limit": 1,
  "presets": [
    {
      "name": "Hablar por WhatsApp",
      "category": "Custom"
    }
  ],
}

{% endschema %}